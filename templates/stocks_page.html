{% extends "base.html" %}
{% block title %}Stock Market â€” TrendWatcher{% endblock %}

{% block content %}
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
    <h1 class="section-title">ðŸ“ˆ STOCK MARKET</h1>
    <button onclick="refreshData('stocks', 'stocks-table')" class="refresh-btn">ðŸ”„ Refresh Data</button>
  </div>

  <div class="stocks-table" id="stocks-table">
    {% for stock in stocks %}
      <div class="stock-row {{ 'gainer' if stock.trend_type == 'gainer' else 'loser' }}">
        <div class="stock-symbol">{{ stock.symbol }}</div>
        <div class="stock-price">${{ "%.2f"|format(stock.price|float) }}</div>
        <div class="stock-change {{ 'pos' if stock.trend_type == 'gainer' else 'neg' }}">
          {{ stock.change_percentage }}
        </div>
        <div class="stock-volume">Vol: {{ stock.volume|int|string|batch(3,'.')|join(',') }}</div>
      </div>
    {% endfor %}
  </div>
{% endblock %}

{% block sidebar %}
  <div class="panel">
    <h4>ðŸ“Š Market Status</h4>
    <p>Real-time data from Alpha Vantage API.</p>
  </div>

  <div class="panel">
    <h4>ðŸŽ¯ Top Movers</h4>
    <p>Gainers and losers updated live.</p>
  </div>
{% endblock %}
